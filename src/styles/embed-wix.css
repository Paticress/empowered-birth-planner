
/* 
 * Energia Materna - CSS para incorporação no Wix
 * Este arquivo contém CSS e JavaScript para facilitar a incorporação do Plano de Parto
 */

/* Estilos para o contêiner responsivo do iframe */
.responsive-iframe-container {
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 150%; /* Proporção de aspecto ajustável conforme necessidade */
  overflow: hidden;
}

.responsive-iframe-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
}

/* Estilos para ajuste de altura e responsividade */
@media screen and (min-width: 768px) {
  .responsive-iframe-container {
    height: 800px; /* Altura inicial antes do ajuste automático */
    overflow: visible;
  }

  .responsive-iframe-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }
}

.embedded-root {
  padding: 0;
  margin: 0;
  width: 100%;
}

/*
INSTRUÇÕES DE USO NO WIX:

1. No seu site Wix, adicione um elemento HTML
2. Clique para editar o HTML
3. APAGUE todo o conteúdo que estiver lá
4. COPIE e COLE o código abaixo (SEM incluir as marcações de comentário):

----- INÍCIO DO CÓDIGO PARA COPIAR (NÃO INCLUA ESTA LINHA) -----

<div id="birth-plan-container" class="responsive-iframe-container">
  <iframe id="birth-plan-iframe" src="https://planodeparto.energiamaterna.com.br/#/embedded-plano" scrolling="auto" allow="fullscreen"></iframe>
</div>

<style>
  .responsive-iframe-container {
    position: relative;
    width: 100%;
    height: 800px; /* Altura inicial antes do ajuste automático */
    overflow: visible;
  }
  
  .responsive-iframe-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }
</style>

<script>
  // Função para ajustar altura do iframe automaticamente
  function setupIframeResizing() {
    console.log("Configurando resize do iframe");
    const iframe = document.getElementById('birth-plan-iframe');
    const container = document.getElementById('birth-plan-container');
    
    if (!iframe || !container) {
      console.error("Elementos iframe ou container não encontrados");
      return;
    }
    
    // Definir altura mínima
    container.style.minHeight = "800px";
    
    // Listener para mensagens do iframe
    window.addEventListener('message', function(event) {
      console.log("Mensagem recebida do iframe:", event.data);
      
      // Verificar se a mensagem é do tipo resize
      if (event.data && event.data.type === 'resize') {
        // Adicionar margem extra para evitar cortes
        const extraMargin = 50;
        const newHeight = event.data.height + extraMargin;
        
        console.log("Ajustando altura para:", newHeight);
        
        // Ajustar altura do iframe e container
        iframe.style.height = newHeight + 'px';
        container.style.height = newHeight + 'px';
        container.style.paddingBottom = '0';
      }
      
      // Verificar se o app foi carregado completamente
      if (event.data && event.data.type === 'loaded') {
        console.log("Aplicativo carregado com sucesso");
      }
    });
    
    // Verificar se o iframe está carregado
    iframe.onload = function() {
      console.log("Iframe carregado");
      setTimeout(function() {
        // Enviar mensagem para o iframe após carregamento
        iframe.contentWindow.postMessage({ type: 'checkSize' }, '*');
      }, 1000);
    };
  }
  
  // Iniciar o ajuste de altura quando a página carregar
  if (document.readyState === 'complete') {
    setupIframeResizing();
  } else {
    window.addEventListener('load', setupIframeResizing);
  }
</script>

----- FIM DO CÓDIGO PARA COPIAR (NÃO INCLUA ESTA LINHA) -----

*/
